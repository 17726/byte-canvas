# Byte Canvas - åœ¨çº¿æ— é™ç”»å¸ƒç¼–è¾‘å™¨

> ğŸš€ **å­—èŠ‚è·³åŠ¨é’è®­è¥ (ByteDance Bootcamp) - å‰ç«¯ä¸“åœºç»“ä¸šé¡¹ç›®**
>
> æœ¬é¡¹ç›®ç”± **å…‰è€€å°ç»„** å¼€å‘ï¼Œæ—¨åœ¨æ¢ç´¢é«˜æ€§èƒ½ Web å›¾å½¢ç¼–è¾‘å™¨çš„æ¶æ„è®¾è®¡ä¸å®ç°ã€‚

åŸºäº Web çš„é«˜æ€§èƒ½å›¾å½¢ç¼–è¾‘å™¨ã€‚æœ¬é¡¹ç›®é‡‡ç”¨ **"æ¸è¿›å¼æ¶æ„"**ã€**"å…­å±‚åˆ†å±‚è®¾è®¡"** ä¸ **"åŒé€šé“æ•°æ®æµ"**ï¼Œåœ¨ MVP é˜¶æ®µåˆ©ç”¨ DOM çš„å¸ƒå±€ä¼˜åŠ¿å®ç°äº†ç±»ä¼¼ Figma çš„æ ¸å¿ƒäº¤äº’ä½“éªŒï¼Œå¹¶ä¸ºæœªæ¥æ— ç¼è¿ç§» Canvas/WebGL æ¸²æŸ“é¢„ç•™äº†æ ‡å‡†é€‚é…å™¨æ¥å£ã€‚

## ğŸš€ é¡¹ç›®æ¦‚è¿°

- **æ ¸å¿ƒç›®æ ‡**: æ„å»ºä¸€ä¸ªæ¶æ„æ¸…æ™°ã€æ”¯æŒå¤æ‚äº¤äº’ä¸ 100+ å›¾å…ƒæµç•…æ¸²æŸ“çš„æ— é™ç”»å¸ƒç¼–è¾‘å™¨ã€‚
- **å½“å‰ç‰ˆæœ¬**: v3.0 (Store é¢†åŸŸæ‹†åˆ† & å†å²è®°å½•æ”¯æŒ)
- **åœ¨çº¿æ¼”ç¤º**: [ç‚¹å‡»è·³è½¬](https://17726.github.io/byte-canvas/)

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **æ¸è¿›å¼æ¸²æŸ“æ¶æ„**: å½“å‰é‡‡ç”¨ **çº¯ DOM + CSS3 Transform** æ–¹æ¡ˆï¼Œé€šè¿‡ `INodeRenderer` é€‚é…å™¨æ¥å£ä¸ä¸šåŠ¡é€»è¾‘è§£è€¦ã€‚
- **ç¨³å¥çš„æ•°æ®æµ**:
  - **åŒé€šé“è®¾è®¡**: åˆ†ç¦»â€œé«˜é¢‘äº¤äº’æµâ€ï¼ˆæ‹–æ‹½/ç¼©æ”¾ï¼‰ä¸â€œåŸå­å‘½ä»¤æµâ€ï¼ˆå±æ€§ä¿®æ”¹/ç¼–ç»„ï¼‰ã€‚
  - **Store é¢†åŸŸæ‹†åˆ†**: å°†æ•°æ® (`CanvasStore`)ã€ä¼šè¯ (`SelectionStore`)ã€å†å² (`HistoryStore`) å’Œ UI (`UIStore`) å½»åº•è§£è€¦ã€‚
- **æ·±åº¦äº¤äº’ç³»ç»Ÿ**:
  - **å…¨èƒ½å˜æ¢**: æ”¯æŒ 8 ç‚¹æ‹–æ‹½ç¼©æ”¾ã€æ—‹è½¬ (RotationHandler)ã€Shift/Alt ç»„åˆé”®ä¿®é¥°ã€‚
  - **åˆ›å»ºæ¨¡å¼**: ç±»ä¼¼ Figma çš„æ‹–æ‹½åˆ›å»º (CreationHandler) ä¸ Ghost Node é¢„è§ˆã€‚
  - **æ–‡æœ¬ç¼–è¾‘**: æ‰€è§å³æ‰€å¾—çš„æ–‡æœ¬ç¼–è¾‘ä½“éªŒ (TextSelectionHandler)ã€‚
  - **é«˜çº§ç¼–ç»„**: æ”¯æŒå¤šå±‚çº§ Groupã€è§£ç»„åŠç»„å†…ç©¿é€é€‰æ‹©ã€‚
- **ç”Ÿäº§çº§åŠŸèƒ½**:
  - **å†å²è®°å½•**: å®Œæ•´æ”¯æŒæ’¤é”€ (Undo) / é‡åš (Redo)ï¼ŒåŸºäºå¿«ç…§èšåˆæœºåˆ¶ã€‚
  - **æ€§èƒ½ç›‘æµ‹**: å†…ç½®æ€§èƒ½æµ‹è¯•é¢æ¿ï¼Œç›‘æ§æ¸²æŸ“å¸§ç‡ä¸èŠ‚ç‚¹æ•°é‡ã€‚
  - **æŒä¹…åŒ–**: è‡ªåŠ¨ä¿å­˜è‡³ LocalStorageï¼Œæ”¯æŒå‰ªè´´æ¿å¤åˆ¶/ç²˜è´´ã€‚

## ğŸ“… é‡Œç¨‹ç¢‘ (Milestones)

### âœ… å·²å®ŒæˆåŠŸèƒ½ (Completed)

- [x] **æ ¸å¿ƒæ¶æ„**: å…­å±‚åˆ†å±‚æ¶æ„ + Handler/Service æ¨¡å¼
- [x] **æ•°æ®æ²»ç†**: Store æ‹†åˆ† (Canvas/Selection/History/UI)
- [x] **ç”»å¸ƒå¼•æ“**: æ— é™ç”»å¸ƒå¹³ç§»ã€ç¼©æ”¾ã€ä¸–ç•Œ/å±å¹•/å®¹å™¨ä¸‰å¤§åæ ‡ç³»è½¬æ¢
- [x] **å›¾å…ƒæ”¯æŒ**: çŸ©å½¢ã€åœ†å½¢ã€æ–‡æœ¬ (åŒå‘ç»‘å®š)ã€å›¾ç‰‡ (å¼‚æ­¥åŠ è½½)
- [x] **äº¤äº’ç³»ç»Ÿ**: æ¡†é€‰ (SATç¢°æ’æ£€æµ‹)ã€æ—‹è½¬ã€å¤šé€‰å˜æ¢
- [x] **å†å²è®°å½•**: æ’¤é”€/é‡åšæ ˆã€è¿ç»­æ“ä½œå†å²é”
- [x] **å·¥ç¨‹åŒ–**: ESLint/Prettier/Husky è§„èŒƒï¼ŒGitHub Actions è‡ªåŠ¨éƒ¨ç½²

### ğŸš§ è¿›è¡Œä¸­ / è®¡åˆ’ (Roadmap)

- [ ] **æ¸²æŸ“å‡çº§**: å¼•å…¥ Canvas/Pixi.js æ¸²æŸ“å™¨é€‚é…å±‚
- [ ] **ååŒåŸºç¡€**: åŸºäº CRDT çš„æ•°æ®ç»“æ„æ”¹é€ 
- [ ] **è¾…åŠ©åŠŸèƒ½**: æ™ºèƒ½å¸é™„å¯¹é½ã€æ ‡å°ºç³»ç»Ÿ

## ğŸ— ç³»ç»Ÿæ¶æ„ (Architecture)

æœ¬é¡¹ç›®é‡‡ç”¨ä¸¥æ ¼çš„ **å…­å±‚åˆ†å±‚æ¶æ„**ï¼Œç¡®ä¿å…³æ³¨ç‚¹åˆ†ç¦»ï¼š

1.  **L1 è§†å›¾å±‚ (View)**: `src/components`
    - **èŒè´£**: åªè´Ÿè´£å±•ç¤ºã€‚Vue ç»„ä»¶ï¼Œæè–„ï¼Œæ— ä¸šåŠ¡é€»è¾‘ã€‚
2.  **L2 é€»è¾‘èƒ¶æ°´å±‚ (Logic Glue)**: `src/composables`
    - **èŒè´£**: è¿æ¥ UI ä¸å†…æ ¸ã€‚å¤„ç†å“åº”å¼çŠ¶æ€ (`useStyleSync`) ä¸å‰¯ä½œç”¨ (`useNodeActions`)ã€‚
3.  **L3 äº¤äº’æ§åˆ¶å±‚ (Interaction)**: `src/core/ToolManager` & `handlers/`
    - **èŒè´£**: è´Ÿè´£è·¯ç”±ä¸çŠ¶æ€ã€‚`ToolManager` ä½œä¸ºäº‹ä»¶æ€»çº¿ï¼Œåˆ†å‘ç»™ `TransformHandler`, `SelectionHandler` ç­‰æœ‰çŠ¶æ€å¤„ç†å™¨ã€‚
4.  **L4 ä¸šåŠ¡é¢†åŸŸå±‚ (Domain)**: `src/core/services`
    - **èŒè´£**: è´Ÿè´£çº¯ä¸šåŠ¡è®¡ç®—ã€‚æ— çŠ¶æ€æœåŠ¡ï¼Œå¦‚ `GroupService` (çº§è”æ›´æ–°), `NodeFactory` (æ•°æ®ç”Ÿäº§)ã€‚
5.  **L5 æ•°æ®å±‚ (Data)**: `src/store`
    - **èŒè´£**: å•ä¸€ä¿¡æºã€‚
    - `canvasStore`: æ ¸å¿ƒå›¾å…ƒæ•°æ®ã€‚
    - `selectionStore`: é€‰ä¸­æ€/ä¼šè¯ç®¡ç†ã€‚
    - `historyStore`: æ—¶é—´æ—…è¡Œç®¡ç†ã€‚
6.  **L6 æ¸²æŸ“å±‚ (Rendering)**: `src/core/renderers`
    - **èŒè´£**: è´Ÿè´£ç»˜åˆ¶ã€‚å°† Node æ•°æ®æ˜ å°„ä¸º CSS Properties æˆ–ç»˜å›¾æŒ‡ä»¤ã€‚

---

## ğŸ“‚ ç›®å½•ç»“æ„ (Directory Structure)

```text
src/
â”œâ”€â”€ components/                 # [L1 è§†å›¾å±‚]
â”‚   â”œâ”€â”€ canvas/                 # >> ç”»å¸ƒæ ¸å¿ƒåŒºåŸŸ
â”‚   â”‚   â”œâ”€â”€ layers/             # å›¾å…ƒç»„ä»¶ (RectLayer, GroupLayer...)
â”‚   â”‚   â”œâ”€â”€ CanvasStage.vue     # ç”»å¸ƒå®¹å™¨
â”‚   â”‚   â””â”€â”€ SelectionOverlay.vue # äº¤äº’åé¦ˆå±‚
â”‚   â”œâ”€â”€ performance/            # >> æ€§èƒ½ç›‘æ§ç»„ä»¶
â”‚   â””â”€â”€ ui/                     # >> UI ç•Œé¢ç»„ä»¶
â”‚       â”œâ”€â”€ panels/             # å›ºå®šé¢æ¿ (AppHeader, InspectorPanel, ToolPanel)
â”‚       â”œâ”€â”€ floating/           # æµ®åŠ¨æ§ä»¶ (ContextMenu, GroupActions, HoverToolbar)
â”‚       â””â”€â”€ common/             # é€šç”¨ç»„ä»¶
â”œâ”€â”€ composables/                # [L2 é€»è¾‘èƒ¶æ°´å±‚]
â”‚   â”œâ”€â”€ useContinuousHistory.ts # å†å²è®°å½•é’©å­
â”‚   â”œâ”€â”€ useNodeActions.ts       # èŠ‚ç‚¹æ“ä½œ (åˆ é™¤ã€ç»„åˆã€å±‚çº§ã€å‰ªè´´æ¿)
â”‚   â””â”€â”€ useStyleSync.ts         # å±æ€§åŒå‘ç»‘å®š
â”œâ”€â”€ core/                       # [æ ¸å¿ƒå†…æ ¸å±‚] Pure TS
â”‚   â”œâ”€â”€ ToolManager.ts          # [L3] äº¤äº’äº‹ä»¶æ€»çº¿
â”‚   â”œâ”€â”€ handlers/               # [L3] æœ‰çŠ¶æ€äº¤äº’å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ CreationHandler.ts  # åˆ›å»ºæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ RotationHandler.ts  # æ—‹è½¬é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ SelectionHandler.ts # æ¡†é€‰é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ TransformHandler.ts # æ‹–æ‹½/ç¼©æ”¾
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/               # [L4] æ— çŠ¶æ€ä¸šåŠ¡æœåŠ¡ (Group, NodeFactory)
â”‚   â”œâ”€â”€ renderers/              # [L6] æ¸²æŸ“é€‚é…å™¨ (DomRenderer...)
â”‚   â””â”€â”€ utils/                  # [åŸºå»º] å‡ ä½•ç®—æ³• (geometry.ts)
â”œâ”€â”€ store/                      # [L5 æ•°æ®å±‚] Pinia Stores
â”‚   â”œâ”€â”€ canvasStore.ts          # å›¾å…ƒæ•°æ®
â”‚   â”œâ”€â”€ historyStore.ts         # æ’¤é”€é‡åšæ ˆ
â”‚   â”œâ”€â”€ selectionStore.ts       # é€‰ä¸­çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ uiStore.ts              # ç•Œé¢æ˜¾éšçŠ¶æ€
â”‚   â””â”€â”€ persistence.ts          # æŒä¹…åŒ–é€»è¾‘
â””â”€â”€ types/                      # TypeScript ç±»å‹å®šä¹‰
```

## ğŸ“¦ å¼€å‘æŒ‡å—

### ç¯å¢ƒå‡†å¤‡

- Node.js > 16.x
- npm / pnpm

### å¸¸ç”¨å‘½ä»¤

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (Hot Reload)
npm run dev

# 3. ç±»å‹æ£€æŸ¥ (TypeScript)
npm run type-check

# 4. ä»£ç é£æ ¼æ£€æŸ¥ä¸ä¿®å¤
npm run lint

# 5. è¿è¡Œå•å…ƒæµ‹è¯• (Vitest)
npm run test:unit

# 6. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### æäº¤è§„èŒƒ

æœ¬é¡¹ç›®é…ç½®äº† Husky + Commitlintï¼Œæäº¤ä¿¡æ¯éœ€éµå¾ª Angular è§„èŒƒï¼š

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ Bug
- `refactor`: ä»£ç é‡æ„
- `docs`: æ–‡æ¡£å˜æ›´
- `chore`: æ„å»º/å·¥å…·é“¾å˜åŠ¨

---

## â¤ï¸ è‡´è°¢ (Acknowledgements)

ç‰¹åˆ«æ„Ÿè°¢æˆ‘ä»¬çš„æŒ‡å¯¼è€å¸ˆ **å°¹å…‰è€€**[@yinguangyao](https://github.com/yinguangyao)ã€‚
åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå°¹è€å¸ˆåœ¨**æ¶æ„é€‰å‹**ï¼ˆDOM vs Canvasï¼‰ã€**æŠ€æœ¯éš¾ç‚¹æ”»åš**ï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®ç°ï¼‰ä»¥åŠ**ä»£ç è§„èŒƒæ²»ç†**ç­‰æ–¹é¢ç»™äºˆäº†æˆ‘ä»¬æå…·ä»·å€¼çš„æŒ‡å¯¼ä¸å»ºè®®ï¼Œå¸®åŠ©æˆ‘ä»¬å°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚

### ğŸ‘¨â€ğŸ’» æ ¸å¿ƒè´¡çŒ®è€… (Contributors)

æ„Ÿè°¢æ¯ä¸€ä½ä¸ºæœ¬é¡¹ç›®ä»˜å‡ºå¿ƒè¡€çš„å›¢é˜Ÿæˆå‘˜ï¼š

| æˆå‘˜       | è§’è‰²          | ä¸»è¦è´¡çŒ®                                 | GitHub                                             |
| :--------- | :------------ | :--------------------------------------- | :------------------------------------------------- |
| **æ›²å† èˆŸ** | **Team Lead** | æ¶æ„è®¾è®¡ã€é‡æ„ä¸»å¯¼ã€å·¥ç¨‹åŒ–åŸºå»ºã€æ ¸å¿ƒäº¤äº’ | [@17726](https://github.com/17726)                 |
| **æè‹¥æºª** | **Core Dev**  | æ¸²æŸ“å±‚é€‚é…å™¨ã€è‡ªç ”å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€æ¸²æŸ“æ¶æ„ | [@ivyli-06](https://github.com/ivyli-06)           |
| **å‘¨å‡¡çš“** | **Data Eng**  | æˆç»„/è§£ç»„ã€å†å²è®°å½•(Undo/Redo)ã€æŒä¹…åŒ–   | [@fhzhouxdu](https://github.com/fhzhouxdu)         |
| **æœ±è‰¯å½§** | **Algo Eng**  | å‡ ä½•ç®—æ³•åº“ã€åæ ‡ç³»è½¬æ¢ã€è§†å£å˜æ¢é€»è¾‘     | [@Treasure-cool](https://github.com/Treasure-cool) |
| **åˆ˜æŸå®‡** | **UI/UX**     | å±æ€§é¢æ¿äº¤äº’ã€ç»„ä»¶åº“å°è£…ã€æ ·å¼è§„èŒƒ       | [@yu10288201](https://github.com/yu10288201)       |
| **è½¦å¹¿æµ©** | **UI/UX**     | å·¥å…·æ é€»è¾‘ã€å¿«æ·é”®ç³»ç»Ÿã€å³é”®èœå•         | [@CheChris](https://github.com/CheChris)           |
